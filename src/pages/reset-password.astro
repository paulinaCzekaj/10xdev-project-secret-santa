---
import AuthLayout from "@/layouts/AuthLayout.astro";
import ResetPasswordForm from "@/components/auth/ResetPasswordForm";

// Enable SSR for this page
export const prerender = false;

// Get access token from URL query params (alternative to hash)
// Supabase Auth may send token as query param in some configurations
const accessToken = Astro.url.searchParams.get("access_token") || undefined;
---

<AuthLayout title="Ustaw nowe hasło | Secret Santa">
  <ResetPasswordForm client:load accessToken={accessToken} />

  <div slot="footer-links">
    <p class="text-gray-600">
      Pamiętasz hasło?
      <a href="/login" class="text-red-500 hover:text-red-600 font-medium ml-1">Zaloguj się</a>
    </p>
  </div>
</AuthLayout>
