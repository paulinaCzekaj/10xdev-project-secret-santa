---
import AuthLayout from "@/layouts/AuthLayout.astro";
import RegisterForm from "@/components/auth/RegisterForm";

// Enable SSR for this page
export const prerender = false;

// Get query parameters
const redirectTo = Astro.url.searchParams.get("redirectTo") || undefined;

// TODO: In the next phase, add session check
// const { data: { session } } = await supabaseClient.auth.getSession();
// if (session) {
//   return Astro.redirect('/dashboard');
// }
---

<AuthLayout title="Rejestracja | Secret Santa">
  <RegisterForm client:load redirectTo={redirectTo} />

  <div slot="footer-links">
    <p class="text-gray-600">
      Masz już konto?
      <a href="/login" class="text-red-600 hover:text-red-700 font-medium ml-1">Zaloguj się</a>
    </p>
  </div>
</AuthLayout>
