# Raport Analizy Test√≥w - Secret Santa
**Data:** 14 listopada 2025
**Branch:** develop
**Autor:** Analiza Claude Code

---

## üìã Podsumowanie Wykonawcze

### Stan obecny
- **Pokrycie kodu:** 19.89% (bardzo niskie)
- **Liczba test√≥w jednostkowych:** 592 (wszystkie przechodzƒÖ ‚úÖ)
- **Liczba plik√≥w testowych:** 28 plik√≥w
- **Testy E2E:** 2 pliki (Playwright)
- **Czas wykonania test√≥w:** ~23 sekundy

### Ocena ryzyka
- **Ryzyko WYSOKIE** dla:
  - ZarzƒÖdzania grupami (group.service, komponenty)
  - ZarzƒÖdzania uczestnikami (participant.service, komponenty)
  - Wy≈õwietlania wynik√≥w (results.service, komponenty)
  - API endpoints (brak walidacji, autoryzacji, error handling)

### Metryka sukcesu MVP z PRD
- **Cel:** "100% dzia≈ÇajƒÖcy g≈Ç√≥wny scenariusz u≈ºytkownika"
- **Status:** **Czƒô≈õciowo spe≈Çniony** - g≈Ç√≥wny scenariusz dzia≈Ça, ale brak test√≥w weryfikujƒÖcych wszystkie kroki

---

## 1. Konfiguracja Test√≥w

### 1.1. Vitest (Testy jednostkowe)
**Plik:** `vitest.config.ts`

**Ustawienia:**
- ≈örodowisko: `jsdom` (dla test√≥w komponent√≥w React)
- Globals: w≈ÇƒÖczone
- Setup file: `vitest.setup.ts`
- Coverage provider: `v8`
- Coverage reporters: text, json, html

**Coverage thresholds:**
```typescript
thresholds: {
  lines: 1,
  functions: 1,
  branches: 1,
  statements: 1,
}
```

‚ö†Ô∏è **PROBLEM KRYTYCZNY:** Progi pokrycia sƒÖ ustawione bardzo nisko (1%) - to praktycznie oznacza brak rzeczywistych wymaga≈Ñ dotyczƒÖcych pokrycia kodu.

### 1.2. Playwright (Testy E2E)
**Plik:** `playwright.config.ts`

**Ustawienia:**
- Test directory: `./e2e`
- PrzeglƒÖdarki: **tylko Chromium/Desktop Chrome** ‚úÖ (zgodnie z PRD)
- Parallel execution: w≈ÇƒÖczone
- Retry na CI: 2 pr√≥by
- Base URL: http://localhost:3000
- Trace: on-first-retry
- Screenshot: only-on-failure
- Web server: `npm run dev:e2e`

**Setup file:** `vitest.setup.ts`
- Mockuje Supabase environment variables
- Mockuje matchMedia, IntersectionObserver, ResizeObserver
- Automatic cleanup po ka≈ºdym te≈õcie

---

## 2. Metryki Pokrycia Kodu

### 2.1. Pokrycie og√≥lne
- **Statements:** 19.89%
- **Branches:** 74.89%
- **Functions:** 60.69%
- **Lines:** 19.89%

### 2.2. Pokrycie wed≈Çug kategorii

#### Bardzo dobre pokrycie (>80%):
- `components/auth`: **90.78%**
- `lib/auth handlers`: **~100%**
- `lib/services/draw.service`: **100%**
- `lib/services/openrouter.service`: **~100%**
- `lib/services/wishlist.service`: **~100%**
- `schemas/auth`: **100%**
- `schemas/exclusion`: **100%**

#### Dobre pokrycie (50-80%):
- `schemas`: **65.9%**
- `hooks`: **~60-70%**

#### Niskie pokrycie (1-50%):
- `components` (poza auth): **0%**
- `lib/services` (inne): **0%**
- `pages`: **0%**

#### Brak pokrycia (0%):
- `pages/api`: **0%** (21 plik√≥w)
- `pages/*.astro`: **0%**
- `components/group`: **0%**
- `components/forms`: **0%**
- `components/dashboard`: **0%**
- `components/result` (wiƒôkszo≈õƒá): **0%**

---

## 3. Dobrze Przetestowane Obszary ‚úÖ

### 3.1. Komponenty Uwierzytelniania (90.78% coverage)

**Pliki testowe:**
- `components/auth/__tests__/LoginForm.test.tsx` - **808 linii**
- `components/auth/__tests__/RegisterForm.test.tsx`
- `components/auth/__tests__/ForgotPasswordForm.test.tsx`
- `components/auth/__tests__/ResetPasswordForm.test.tsx`

**Zakres test√≥w:**
- Renderowanie formularzy
- Walidacja p√≥l (email, has≈Ço, potwierdzenie has≈Ça)
- Interakcje u≈ºytkownika (wpisywanie, submit)
- Obs≈Çuga b≈Çƒôd√≥w (b≈Çƒôdne dane, b≈Çƒôdy serwera)
- Edge cases (puste pola, niepoprawny format email)
- Accessibility (aria-labels, role attributes)
- Loading states
- Success scenarios

### 3.2. Logika Losowania Secret Santa (100% coverage)

**Pliki testowe:**
- `lib/services/__tests__/draw.service.test.ts` - **438 linii**
- `lib/services/__tests__/draw-cross-pairs-check.test.ts`
- `lib/services/__tests__/draw-final-test.test.ts`

**Zakres test√≥w:**
- Podstawowe wymagania losowania
- Respektowanie regu≈Ç wyklucze≈Ñ
- Weryfikacja losowo≈õci
- R√≥≈ºne struktury cykli
- Niemo≈ºliwe losowania (walidacja)
- Edge cases (minimalna liczba uczestnik√≥w, maksymalne wykluczenia)

### 3.3. AI-generowanie Listu do Miko≈Çaja (Wersja 1.1)

**Pliki testowe:**
- `lib/services/__tests__/openrouter.service.test.ts` - **595 linii**
- `hooks/__tests__/useAIGeneration.test.ts` - **299 linii**
- `hooks/__tests__/useAIGenerationStatus.test.ts`
- `components/result/__tests__/AIPromptModal.test.tsx` - **150 linii**

**Zakres test√≥w:**
- Generowanie listu z API
- Walidacja promptu (d≈Çugo≈õƒá, zawarto≈õƒá)
- Rate limiting (3/5 generowa≈Ñ per grupa)
- Sanityzacja XSS (wykrywanie script tags, onclick handlers)
- Error handling (timeout, API errors, network errors)
- Edge cases (pusty prompt, za d≈Çugi prompt)
- Mock OpenRouter API
- Loading states
- Success/error flows

### 3.4. Wishlist Service (100% coverage)

**Plik testowy:**
- `lib/services/wishlist.service.test.ts`

**Zakres test√≥w:**
- Tworzenie listy ≈ºycze≈Ñ
- Aktualizacja listy ≈ºycze≈Ñ
- Pobieranie listy ≈ºycze≈Ñ
- Auto-linkowanie URLs
- Walidacja d≈Çugo≈õci (max 10000 znak√≥w)
- Error handling

### 3.5. Walidacja Schemat√≥w (100% coverage)

**Pliki testowe:**
- `schemas/__tests__/exclusion.schemas.test.ts`
- `schemas/__tests__/registerFormSchema.test.ts`
- `schemas/__tests__/resetPasswordFormSchema.test.ts`
- `components/auth/__tests__/loginFormSchema.test.ts`
- `components/auth/__tests__/forgotPasswordFormSchema.test.ts`

**Zakres test√≥w:**
- Walidacja formularzy (format email, d≈Çugo≈õƒá has≈Ça)
- Walidacja regu≈Ç wyklucze≈Ñ
- Edge cases (puste pola, niepoprawne typy)
- Custom validation rules

### 3.6. Auth Handlers (100% coverage)

**Pliki testowe:**
- `lib/auth/__tests__/loginHandler.test.ts`
- `lib/auth/__tests__/registerHandler.test.ts`
- `lib/auth/__tests__/forgotPasswordHandler.test.ts`
- `lib/auth/__tests__/resetPasswordHandler.test.ts`

**Zakres test√≥w:**
- Logowanie u≈ºytkownika
- Rejestracja u≈ºytkownika
- Reset has≈Ça
- Error handling (niepoprawne dane, b≈Çƒôdy Supabase)

### 3.7. Hooki (60-70% coverage)

**Pliki testowe:**
- `hooks/__tests__/useWishlistLinking.test.ts`
- `hooks/__tests__/useAddExclusion.test.ts`
- `hooks/__tests__/useAIGeneration.test.ts`
- `hooks/__tests__/useAIGenerationStatus.test.ts`

### 3.8. Utilities

**Pliki testowe:**
- `__tests__/lib/utils.test.ts`
- `__tests__/notifications/messages.test.ts`
- `__tests__/notifications/notificationService.test.ts`

### 3.9. Komponenty

**Pliki testowe:**
- `__tests__/components/Button.test.tsx`
- `components/result/wishlist-editor/__tests__/WishlistEditor.test.tsx`

---

## 4. BrakujƒÖce Testy - Analiza Szczeg√≥≈Çowa ‚ùå

### 4.1. Serwisy Biznesowe (0% coverage) - KRYTYCZNE

#### 1. `lib/services/group.service.ts` (21,819 bajt√≥w)
**BrakujƒÖce testy dla:**
- Tworzenie grupy (createGroup)
- Pobieranie grupy (getGroup, getGroupById)
- Aktualizacja grupy (updateGroup)
- Usuwanie grupy (deleteGroup)
- Pobieranie grup u≈ºytkownika (getUserGroups)
- Walidacja danych grupy
- Error handling

**User Stories:** US-005 (Tworzenie grupy), US-009 (Usuwanie grupy)

**Priorytet:** **KRYTYCZNY**

---

#### 2. `lib/services/participant.service.ts` (26,400 bajt√≥w)
**BrakujƒÖce testy dla:**
- Dodawanie uczestnika (addParticipant)
- Pobieranie uczestnika (getParticipant, getParticipantById)
- Aktualizacja uczestnika (updateParticipant)
- Usuwanie uczestnika (deleteParticipant)
- Pobieranie uczestnik√≥w grupy (getGroupParticipants)
- Walidacja unikalno≈õci email w grupie
- Generowanie unikalnych link√≥w dostƒôpu
- Error handling

**User Stories:** US-006 (Dodawanie uczestnik√≥w)

**Priorytet:** **KRYTYCZNY**

---

#### 3. `lib/services/results.service.ts` (16,615 bajt√≥w)
**BrakujƒÖce testy dla:**
- Pobieranie wyniku losowania dla zalogowanego u≈ºytkownika
- Pobieranie wyniku losowania dla niezalogowanego u≈ºytkownika (via token)
- Walidacja dostƒôpu do wyniku
- ≈öledzenie otwarƒá unikalnych link√≥w
- Error handling (brak wyniku, niepoprawny token)

**User Stories:** US-012 (Wynik - zalogowany), US-013 (Wynik - niezalogowany)

**Priorytet:** **KRYTYCZNY**

---

#### 4. `lib/services/exclusion-rule.service.ts` (16,084 bajt√≥w)
**BrakujƒÖce testy dla:**
- Tworzenie regu≈Çy wykluczenia (createExclusionRule)
- Pobieranie regu≈Ç wyklucze≈Ñ dla grupy (getGroupExclusionRules)
- Usuwanie regu≈Çy wykluczenia (deleteExclusionRule)
- Walidacja regu≈Ç (wykrywanie cykli, niemo≈ºliwych konfiguracji)
- Error handling

**User Stories:** US-007 (Regu≈Çy wyklucze≈Ñ)

**Priorytet:** **KRYTYCZNY**

---

#### 5. `lib/services/assignments.service.ts` (3,911 bajt√≥w)
**BrakujƒÖce testy dla:**
- Tworzenie przypisa≈Ñ po losowaniu
- Pobieranie przypisania dla uczestnika
- Walidacja przypisa≈Ñ
- Error handling

**Priorytet:** **KRYTYCZNY**

---

### 4.2. API Endpoints (0% coverage) - WYSOKIE RYZYKO

**Wszystkie 21 plik√≥w API nie majƒÖ test√≥w:**

#### Auth endpoints (4 pliki):
- `pages/api/auth/login.ts`
- `pages/api/auth/register.ts`
- `pages/api/auth/logout.ts`
- `pages/api/auth/reset-password.ts`

**BrakujƒÖce testy:**
- Walidacja request body
- Autoryzacja (Bearer token)
- Response format
- Error handling (400, 401, 500)
- Rate limiting

---

#### Groups endpoints (7 plik√≥w):
- `pages/api/groups/index.ts` (GET, POST)
- `pages/api/groups/[groupId]/index.ts` (GET, PUT, DELETE)
- `pages/api/groups/[groupId]/draw.ts` (POST)
- `pages/api/groups/[groupId]/draw/validate.ts` (POST)
- `pages/api/groups/[groupId]/participants.ts` (GET, POST)
- `pages/api/groups/[groupId]/exclusions.ts` (GET, POST)
- `pages/api/groups/[groupId]/result.ts` (GET)

**BrakujƒÖce testy:**
- Walidacja groupId (UUID format)
- Autoryzacja (czy user jest tw√≥rcƒÖ grupy)
- Walidacja request body
- Error handling
- Edge cases (grupa nie istnieje, losowanie ju≈º wykonane)

---

#### Participants endpoints (6 plik√≥w):
- `pages/api/participants/[participantId].ts` (GET, PUT, DELETE)
- `pages/api/participants/[participantId]/reveal.ts` (POST)
- `pages/api/participants/[participantId]/wishlist/index.ts` (GET, PUT)
- `pages/api/participants/[participantId]/wishlist/generate-ai.ts` (POST)
- `pages/api/participants/[participantId]/wishlist/ai-status.ts` (GET)
- `pages/api/participants/[participantId]/wishlist/generate-from-wishlist.ts` (POST)

**BrakujƒÖce testy:**
- Walidacja participantId
- Autoryzacja (Bearer token lub participant access token)
- AI rate limiting (3/5 generowa≈Ñ)
- Error handling

---

#### Results endpoints (2 pliki):
- `pages/api/results/[token]/index.ts` (GET)
- `pages/api/results/[token]/track.ts` (POST)

**BrakujƒÖce testy:**
- Walidacja access token
- ≈öledzenie otwarƒá link√≥w
- Error handling (niepoprawny token)

---

#### Exclusions endpoints (1 plik):
- `pages/api/exclusions/[id].ts` (DELETE)

**BrakujƒÖce testy:**
- Walidacja exclusion ID
- Autoryzacja
- Error handling

**Priorytet:** **WYSOKI**

---

### 4.3. Komponenty Kluczowe (0% coverage) - WYSOKIE RYZYKO

#### ZarzƒÖdzanie GrupƒÖ (10 komponent√≥w):

**1. `components/group/GroupView.tsx` (215 linii)**
- G≈Ç√≥wny widok grupy
- Wy≈õwietlanie informacji o grupie
- Nawigacja miƒôdzy sekcjami (uczestnicy, wykluczenia, losowanie)
- **Priorytet:** KRYTYCZNY

**2. `components/group/GroupHeader.tsx` (106 linii)**
- Nag≈Ç√≥wek grupy z nazwƒÖ, bud≈ºetem, datƒÖ
- Przycisk edycji
- **Priorytet:** WYSOKI

**3. `components/group/GroupEditModal.tsx` (188 linii)**
- Modal edycji grupy
- Walidacja formularza
- **Priorytet:** WYSOKI

**4. `components/group/DeleteGroupModal.tsx` (130 linii)**
- Modal potwierdzenia usuniƒôcia
- **Priorytet:** WYSOKI

**5. `components/group/AddParticipantForm.tsx` (122 linii)**
- Formularz dodawania uczestnika
- Walidacja (imiƒô, email)
- **Priorytet:** KRYTYCZNY

**6. `components/group/ParticipantsSection.tsx`**
- Sekcja uczestnik√≥w
- **Priorytet:** WYSOKI

**7. `components/group/ParticipantsList.tsx` (208 linii)**
- Lista uczestnik√≥w
- Edycja/usuwanie uczestnik√≥w
- **Priorytet:** KRYTYCZNY

**8. `components/group/EditParticipantModal.tsx` (151 linii)**
- Modal edycji uczestnika
- **Priorytet:** WYSOKI

**9. `components/group/DeleteParticipantModal.tsx` (62 linii)**
- Modal potwierdzenia usuniƒôcia uczestnika
- **Priorytet:** ≈öREDNI

**10. `components/group/DrawSection.tsx` (144 linii)**
- Sekcja losowania
- Przycisk rozpoczƒôcia losowania
- Walidacja (min 3 uczestnicy)
- **Priorytet:** KRYTYCZNY

---

#### Regu≈Çy Wyklucze≈Ñ (3 komponenty):

**1. `components/group/ExclusionsSection.tsx` (93 linii)**
- Sekcja wyklucze≈Ñ
- **Priorytet:** WYSOKI

**2. `components/group/ExclusionsList.tsx` (64 linii)**
- Lista wyklucze≈Ñ
- **Priorytet:** WYSOKI

**3. `components/group/AddExclusionForm.tsx` (153 linii)**
- Formularz dodawania wykluczenia
- Wyb√≥r uczestnik√≥w (A nie mo≈ºe wylosowaƒá B)
- **Priorytet:** KRYTYCZNY

---

#### Dashboard (1 komponent):

**1. `components/dashboard/Dashboard.tsx` (185 linii)**
- G≈Ç√≥wny widok u≈ºytkownika
- Wy≈õwietlanie grup "kt√≥re stworzy≈Çem"
- Wy≈õwietlanie grup "do kt√≥rych nale≈ºƒô"
- **User Story:** US-010
- **Priorytet:** KRYTYCZNY

---

#### Tworzenie Grupy (1 komponent):

**1. `components/forms/CreateGroupForm.tsx` (118 linii)**
- Formularz tworzenia grupy
- Walidacja (nazwa, bud≈ºet, data)
- **User Story:** US-005
- **Priorytet:** KRYTYCZNY

---

#### Wyniki (7+ komponent√≥w):

**1. `components/result/ResultView.tsx`**
- G≈Ç√≥wny widok wyniku
- **Priorytet:** KRYTYCZNY

**2. `components/result/ResultHeader.tsx`**
- Nag≈Ç√≥wek wyniku
- **Priorytet:** WYSOKI

**3. `components/result/AssignedPersonCard.tsx`**
- Karta wylosowanej osoby
- **Priorytet:** KRYTYCZNY

**4. `components/result/WishlistSection.tsx`**
- Sekcja listy ≈ºycze≈Ñ
- **Priorytet:** WYSOKI

**5. `components/result/WishlistDisplay.tsx`**
- Wy≈õwietlanie listy ≈ºycze≈Ñ z auto-linkowaniem
- **Priorytet:** WYSOKI

**6. `components/result/GiftBox.tsx`**
- Dekoracyjny element
- **Priorytet:** NISKI

**7. Inne komponenty result/**
- AIGenerateButton, AIPreviewModal, etc.
- **Priorytet:** ≈öREDNI

---

#### Error Components (8+ komponent√≥w):

**Wszystkie bez test√≥w:**
- `ErrorWrapper.tsx`
- `GenericError.tsx`
- `NetworkError.tsx`
- `UnauthorizedError.tsx`
- `ForbiddenError.tsx`
- `NotFoundError.tsx`
- `ServerError.tsx`
- `DrawError.tsx`

**Priorytet:** NISKI

---

### 4.4. BrakujƒÖce Testy E2E - WYSOKIE RYZYKO

**Obecne testy E2E (2 pliki):**
- ‚úÖ `e2e/example.spec.ts` - podstawowe smoke testy
- ‚úÖ `e2e/groups/create-group-flow-pom.spec.ts` - tworzenie grupy

**BrakujƒÖce scenariusze E2E:**

#### 1. Uwierzytelnianie (US-001, US-003)
- ‚ùå Pe≈Çny flow rejestracji u≈ºytkownika
- ‚ùå Reset has≈Ça / forgot password flow
- ‚ùå Logowanie z b≈Çƒôdnymi danymi
- ‚ùå Wylogowanie

**Priorytet:** ≈öREDNI

---

#### 2. ZarzƒÖdzanie Uczestnikami (US-006)
- ‚ùå Dodawanie uczestnika z email
- ‚ùå Dodawanie uczestnika bez email
- ‚ùå Edycja uczestnika
- ‚ùå Usuwanie uczestnika
- ‚ùå Walidacja unikalno≈õci email w grupie
- ‚ùå Dodanie minimum 3 uczestnik√≥w (wymagane dla losowania)

**Priorytet:** KRYTYCZNY

---

#### 3. Regu≈Çy Wyklucze≈Ñ (US-007)
- ‚ùå Dodawanie regu≈Çy wykluczenia
- ‚ùå Usuwanie regu≈Çy wykluczenia
- ‚ùå Walidacja niemo≈ºliwego losowania (wykluczenia tworzƒÖ deadlock)

**Priorytet:** WYSOKI

---

#### 4. Pe≈Çny Flow Losowania (US-008) - NAJWA≈ªNIEJSZY TEST
- ‚ùå Dodanie grupy
- ‚ùå Dodanie minimum 3 uczestnik√≥w
- ‚ùå (Opcjonalnie) Dodanie wyklucze≈Ñ
- ‚ùå Uruchomienie losowania
- ‚ùå Weryfikacja, ≈ºe losowanie siƒô wykona≈Ço
- ‚ùå Weryfikacja, ≈ºe edycja grupy jest zablokowana po losowaniu
- ‚ùå Weryfikacja, ≈ºe nikt nie wylosowa≈Ç samego siebie
- ‚ùå Weryfikacja, ≈ºe wykluczenia zosta≈Çy uwzglƒôdnione

**Priorytet:** KRYTYCZNY

---

#### 5. Wy≈õwietlanie Wynik√≥w (US-012, US-013)
- ‚ùå Sprawdzanie wyniku jako zalogowany u≈ºytkownik
- ‚ùå Sprawdzanie wyniku jako niezalogowany u≈ºytkownik (via unique link)
- ‚ùå ≈öledzenie otwarƒá link√≥w (opened, timestamp)
- ‚ùå Wy≈õwietlanie imienia wylosowanej osoby
- ‚ùå Wy≈õwietlanie listy ≈ºycze≈Ñ wylosowanej osoby

**Priorytet:** KRYTYCZNY

---

#### 6. Listy ≈ªycze≈Ñ (US-011)
- ‚ùå Dodawanie listy ≈ºycze≈Ñ
- ‚ùå Edycja listy ≈ºycze≈Ñ
- ‚ùå Auto-linkowanie URLs (wklejony link staje siƒô klikalny)
- ‚ùå Blokada edycji po up≈Çyniƒôciu daty zako≈Ñczenia wydarzenia

**Priorytet:** WYSOKI

---

#### 7. AI-generowanie Listu do Miko≈Çaja (US-014) - Wersja 1.1
- ‚ùå Pe≈Çny flow generowania:
  - Klikniƒôcie przycisku "Generuj list z AI üéÖ"
  - Wpisanie promptu (preferencje)
  - Generowanie listu
  - PodglƒÖd wygenerowanego listu
  - Akceptacja/odrzucenie
- ‚ùå Limity generowania:
  - 3 generowania dla niezalogowanych
  - 5 generowa≈Ñ dla zalogowanych
  - Blokada przycisku po wykorzystaniu limit√≥w
- ‚ùå Regeneracja listu
- ‚ùå Edycja wygenerowanego listu po akceptacji

**Priorytet:** WYSOKI

---

#### 8. Edycja i Usuwanie Grup (US-009)
- ‚ùå Edycja parametr√≥w grupy (nazwa, bud≈ºet, data)
- ‚ùå Usuwanie grupy z konfirmacjƒÖ
- ‚ùå Walidacja, ≈ºe nie mo≈ºna edytowaƒá grupy po losowaniu

**Priorytet:** WYSOKI

---

#### 9. Dashboard (US-010)
- ‚ùå Wy≈õwietlanie sekcji "Grupy, kt√≥re stworzy≈Çem"
- ‚ùå Wy≈õwietlanie sekcji "Grupy, do kt√≥rych nale≈ºƒô"
- ‚ùå Nawigacja do widoku grupy

**Priorytet:** ≈öREDNI

---

## 5. Jako≈õƒá Test√≥w

### 5.1. Mocne Strony ‚úÖ

#### 1. Architektura Test√≥w
- ‚úÖ U≈ºywa **Page Object Model** w testach E2E
- ‚úÖ Testy jednostkowe dobrze zorganizowane w katalogach `__tests__`
- ‚úÖ Sp√≥jna struktura **Arrange-Act-Assert**
- ‚úÖ Proper cleanup po testach (automatyczne w `vitest.setup.ts`)

#### 2. Kompleksowo≈õƒá Testowanych Obszar√≥w
- ‚úÖ Testy auth form sƒÖ bardzo kompleksowe (808 linii dla LoginForm)
- ‚úÖ Testy draw.service sprawdzajƒÖ losowo≈õƒá i r√≥≈ºne struktury cykli
- ‚úÖ Testy AI service sprawdzajƒÖ sanityzacjƒô XSS i edge cases
- ‚úÖ Testy schemat√≥w walidacji sƒÖ kompletne

#### 3. Coverage Scenarios
- ‚úÖ Testy renderowania
- ‚úÖ Testy interakcji u≈ºytkownika
- ‚úÖ Testy walidacji formularzy
- ‚úÖ Testy obs≈Çugi b≈Çƒôd√≥w
- ‚úÖ Edge cases i boundary conditions
- ‚úÖ Accessibility tests (w LoginForm - aria-labels, role attributes)

#### 4. U≈ºywane Best Practices
- ‚úÖ Mock w odpowiednich miejscach (fetch, toast, Supabase)
- ‚úÖ Proper cleanup po testach
- ‚úÖ Loading states
- ‚úÖ Error handling
- ‚úÖ Network errors
- ‚úÖ U≈ºywanie `vi.fn()`, `vi.spyOn()`, `vi.mock()`
- ‚úÖ TypeScript type checking w testach

### 5.2. S≈Çabe Strony ‚ö†Ô∏è

#### 1. Bardzo Niskie Pokrycie Kodu (19.89%)
- ‚ùå Wiƒôkszo≈õƒá serwis√≥w nie ma test√≥w
- ‚ùå Komponenty grupowe bez test√≥w
- ‚ùå API endpoints nie sƒÖ testowane
- ‚ùå Dashboard bez test√≥w
- ‚ùå Komponenty wynik√≥w bez test√≥w

#### 2. Niskie Progi Coverage (1%)
- ‚ùå Nie wymuszajƒÖ rzeczywistego pokrycia kodu
- ‚ùå PozwalajƒÖ na commit kodu bez test√≥w
- ‚ùå Brak ochrony przed regresjƒÖ

#### 3. Brak Test√≥w Integracyjnych
- ‚ùå Nie ma test√≥w sprawdzajƒÖcych integracjƒô miƒôdzy komponentami
- ‚ùå Brak test√≥w dla pe≈Çnych user flows (opr√≥cz 1 testu E2E)
- ‚ùå Brak test√≥w API z mockowanym Supabase

#### 4. Brak Test√≥w API (0% coverage)
- ‚ùå Wszystkie 21 endpoints nie majƒÖ test√≥w jednostkowych
- ‚ùå Brak mockowania Supabase dla test√≥w API
- ‚ùå Brak test√≥w autoryzacji
- ‚ùå Brak test√≥w walidacji request/response

#### 5. Ograniczone Testy E2E (tylko 2 pliki)
- ‚ùå Brakuje test√≥w dla kluczowych funkcjonalno≈õci z PRD
- ‚ùå Tylko 1 scenariusz biznesowy (tworzenie grupy)
- ‚ùå Brak testu pe≈Çnego flow losowania
- ‚ùå Brak test√≥w wy≈õwietlania wynik√≥w

---

## 6. Zidentyfikowane Problemy

### 6.1. BrakujƒÖce Testy dla Kluczowych Funkcjonalno≈õci z PRD

#### MVP (BrakujƒÖce):

**1. Uwierzytelnianie:**
- ‚ùå E2E test dla rejestracji (US-001)
- ‚ùå E2E test dla reset has≈Ça (US-003)
- ‚úÖ Testy jednostkowe dla auth forms sƒÖ dobre

**2. ZarzƒÖdzanie Grupami:**
- ‚ùå Brak test√≥w dla group.service (US-005, US-009)
- ‚ùå E2E testy dla edycji grupy
- ‚ùå E2E testy dla usuwania grupy

**3. ZarzƒÖdzanie Uczestnikami:**
- ‚ùå Brak test√≥w dla participant.service (US-006)
- ‚ùå E2E testy dla dodawania/edycji/usuwania uczestnik√≥w

**4. Regu≈Çy Wyklucze≈Ñ:**
- ‚ùå Brak test√≥w dla exclusion-rule.service (US-007)
- ‚ùå E2E testy dla wyklucze≈Ñ

**5. Losowanie:**
- ‚úÖ Testy algorytmu sƒÖ doskona≈Çe
- ‚ùå E2E test pe≈Çnego losowania (US-008)
- ‚ùå Testy walidacji mo≈ºliwo≈õci losowania

**6. Wyniki:**
- ‚ùå Brak test√≥w dla results.service (US-012, US-013)
- ‚ùå E2E testy dla wy≈õwietlania wynik√≥w
- ‚ùå E2E testy dla ≈õledzenia otwarƒá link√≥w

**7. Listy ≈ªycze≈Ñ:**
- ‚úÖ Testy wishlist.service sƒÖ dobre
- ‚ùå E2E testy dla edycji listy ≈ºycze≈Ñ (US-011)

#### Wersja 1.1 - AI (Czƒô≈õciowo pokryte):

**8. AI-generowanie listu:**
- ‚úÖ Testy openrouter.service sƒÖ doskona≈Çe (595 linii)
- ‚úÖ Testy hook√≥w AI sƒÖ dobre
- ‚úÖ Testy AIPromptModal sƒÖ dobre
- ‚ùå E2E test pe≈Çnego flow AI-generowania (US-014)
- ‚ùå E2E testy limit√≥w generowania (3/5)

### 6.2. Obszary z Wysokim Ryzykiem Bez Test√≥w

**1. API Endpoints (0% coverage):**
- Wszystkie 21 endpoints nie majƒÖ test√≥w
- Brak walidacji request/response
- Brak test√≥w autoryzacji
- Brak test√≥w error handling

**2. Komponenty Grupowe (0% coverage):**
- GroupView - g≈Ç√≥wny widok grupy
- Dashboard - g≈Ç√≥wny widok u≈ºytkownika
- ParticipantsList - krytyczny dla zarzƒÖdzania
- DrawSection - krytyczny dla losowania

**3. Serwisy Biznesowe (0% coverage):**
- group.service - CRUD grup
- participant.service - CRUD uczestnik√≥w
- results.service - wy≈õwietlanie wynik√≥w
- exclusion-rule.service - regu≈Çy wyklucze≈Ñ

### 6.3. Potencjalne Flaky Testy

W obecnych testach nie zauwa≈ºono oczywistych flaky patterns, ale potencjalne ryzyka:
- ‚ö†Ô∏è Testy E2E u≈ºywajƒÖce `page.waitForTimeout()` (mo≈ºe byƒá niestabilne na wolniejszych maszynach)
- ‚ö†Ô∏è Brak retry logic dla niekt√≥rych asercji w testach React
- ‚ö†Ô∏è Brak explicit waits w testach E2E (mo≈ºe powodowaƒá race conditions)

---

## 7. Plan Poprawy Test√≥w

### Etap 1: Testy Serwis√≥w Biznesowych (Priorytet KRYTYCZNY)
**Szacowany czas:** 1 dzie≈Ñ

**Zadania:**

1. **Dodaƒá testy dla `group.service.ts`**
   - Lokalizacja: `src/lib/services/__tests__/group.service.test.ts`
   - Zakres:
     - Tworzenie grupy (createGroup)
     - Pobieranie grupy (getGroup, getGroupById)
     - Aktualizacja grupy (updateGroup)
     - Usuwanie grupy (deleteGroup)
     - Pobieranie grup u≈ºytkownika (getUserGroups)
     - Walidacja danych grupy
     - Error handling (404, 403, 500)
   - User Stories: US-005, US-009
   - Szacowana liczba test√≥w: ~30-40

2. **Dodaƒá testy dla `participant.service.ts`**
   - Lokalizacja: `src/lib/services/__tests__/participant.service.test.ts`
   - Zakres:
     - Dodawanie uczestnika (addParticipant)
     - Pobieranie uczestnika (getParticipant, getParticipantById)
     - Aktualizacja uczestnika (updateParticipant)
     - Usuwanie uczestnika (deleteParticipant)
     - Pobieranie uczestnik√≥w grupy (getGroupParticipants)
     - Walidacja unikalno≈õci email w grupie
     - Generowanie unikalnych link√≥w dostƒôpu
     - Error handling
   - User Stories: US-006
   - Szacowana liczba test√≥w: ~35-45

3. **Dodaƒá testy dla `results.service.ts`**
   - Lokalizacja: `src/lib/services/__tests__/results.service.test.ts`
   - Zakres:
     - Pobieranie wyniku losowania dla zalogowanego u≈ºytkownika
     - Pobieranie wyniku losowania dla niezalogowanego u≈ºytkownika (via token)
     - Walidacja dostƒôpu do wyniku
     - ≈öledzenie otwarƒá unikalnych link√≥w
     - Error handling (brak wyniku, niepoprawny token)
   - User Stories: US-012, US-013
   - Szacowana liczba test√≥w: ~25-30

4. **Dodaƒá testy dla `exclusion-rule.service.ts`**
   - Lokalizacja: `src/lib/services/__tests__/exclusion-rule.service.test.ts`
   - Zakres:
     - Tworzenie regu≈Çy wykluczenia
     - Pobieranie regu≈Ç wyklucze≈Ñ dla grupy
     - Usuwanie regu≈Çy wykluczenia
     - Walidacja regu≈Ç (wykrywanie cykli, niemo≈ºliwych konfiguracji)
     - Error handling
   - User Stories: US-007
   - Szacowana liczba test√≥w: ~25-30

5. **Dodaƒá testy dla `assignments.service.ts`**
   - Lokalizacja: `src/lib/services/__tests__/assignments.service.test.ts`
   - Zakres:
     - Tworzenie przypisa≈Ñ po losowaniu
     - Pobieranie przypisania dla uczestnika
     - Walidacja przypisa≈Ñ
     - Error handling
   - Szacowana liczba test√≥w: ~15-20

**Sukces Etapu 1:**
- Wszystkie 5 serwis√≥w majƒÖ pokrycie >80%
- Minimum 130 nowych test√≥w
- Coverage og√≥lny wzrasta do ~35-40%

---

### Etap 2: Testy Kluczowych Komponent√≥w (Priorytet WYSOKI)
**Szacowany czas:** 1 dzie≈Ñ

**Zadania:**

6. **Dodaƒá testy dla `Dashboard.tsx`**
   - Lokalizacja: `src/components/dashboard/__tests__/Dashboard.test.tsx`
   - Zakres:
     - Renderowanie dashboardu
     - Wy≈õwietlanie sekcji "Grupy, kt√≥re stworzy≈Çem"
     - Wy≈õwietlanie sekcji "Grupy, do kt√≥rych nale≈ºƒô"
     - Nawigacja do widoku grupy
     - Loading states
     - Empty states (brak grup)
     - Error handling
   - User Stories: US-010
   - Szacowana liczba test√≥w: ~20-25

7. **Dodaƒá testy dla `GroupView.tsx`**
   - Lokalizacja: `src/components/group/__tests__/GroupView.test.tsx`
   - Zakres:
     - Renderowanie widoku grupy
     - Wy≈õwietlanie informacji o grupie
     - Nawigacja miƒôdzy zak≈Çadkami (uczestnicy, wykluczenia, losowanie)
     - Blokada edycji po losowaniu
     - Loading states
     - Error handling
   - Szacowana liczba test√≥w: ~25-30

8. **Dodaƒá testy dla `CreateGroupForm.tsx`**
   - Lokalizacja: `src/components/forms/__tests__/CreateGroupForm.test.tsx`
   - Zakres:
     - Renderowanie formularza
     - Walidacja p√≥l (nazwa, bud≈ºet, data)
     - Submit formularza
     - Error handling
     - Success flow
   - User Stories: US-005
   - Szacowana liczba test√≥w: ~20-25

9. **Dodaƒá testy dla `DrawSection.tsx`**
   - Lokalizacja: `src/components/group/__tests__/DrawSection.test.tsx`
   - Zakres:
     - Renderowanie sekcji losowania
     - Przycisk rozpoczƒôcia losowania
     - Walidacja minimum 3 uczestnik√≥w
     - Modal potwierdzenia
     - Success flow
     - Error handling
   - User Stories: US-008
   - Szacowana liczba test√≥w: ~20-25

10. **Dodaƒá testy dla `ParticipantsList.tsx`**
    - Lokalizacja: `src/components/group/__tests__/ParticipantsList.test.tsx`
    - Zakres:
      - Renderowanie listy uczestnik√≥w
      - Edycja uczestnika
      - Usuwanie uczestnika
      - Empty state (brak uczestnik√≥w)
      - Loading states
    - Szacowana liczba test√≥w: ~25-30

11. **Dodaƒá testy dla `AddExclusionForm.tsx`**
    - Lokalizacja: `src/components/group/__tests__/AddExclusionForm.test.tsx`
    - Zakres:
      - Renderowanie formularza
      - Wyb√≥r uczestnik√≥w (A nie mo≈ºe wylosowaƒá B)
      - Walidacja (nie mo≈ºna wybraƒá tej samej osoby)
      - Submit formularza
      - Error handling
    - User Stories: US-007
    - Szacowana liczba test√≥w: ~20-25

**Sukces Etapu 2:**
- 6 kluczowych komponent√≥w majƒÖ pokrycie >80%
- Minimum 130 nowych test√≥w
- Coverage og√≥lny wzrasta do ~50-55%

---

### Etap 3: Testy E2E dla Kluczowych Flows (Priorytet WYSOKI)
**Szacowany czas:** 1 dzie≈Ñ

**Zadania:**

12. **E2E: Pe≈Çny Flow Losowania (NAJWA≈ªNIEJSZY TEST)**
    - Lokalizacja: `e2e/groups/full-draw-flow.spec.ts`
    - Scenariusz:
      1. Login u≈ºytkownika
      2. Tworzenie grupy
      3. Dodanie minimum 3 uczestnik√≥w (np. 5)
      4. (Opcjonalnie) Dodanie 1-2 regu≈Ç wyklucze≈Ñ
      5. Uruchomienie losowania
      6. Weryfikacja, ≈ºe losowanie siƒô wykona≈Ço
      7. Weryfikacja, ≈ºe edycja grupy jest zablokowana
      8. Weryfikacja wynik√≥w dla ka≈ºdego uczestnika:
         - Nikt nie wylosowa≈Ç samego siebie
         - Wykluczenia zosta≈Çy uwzglƒôdnione
      9. Sprawdzenie dostƒôpu do wynik√≥w (via unique link)
    - User Stories: US-008, US-012, US-013
    - Szacowana liczba scenariuszy: 1 g≈Ç√≥wny + 2-3 edge cases

13. **E2E: ZarzƒÖdzanie Uczestnikami**
    - Lokalizacja: `e2e/groups/participants-management.spec.ts`
    - Scenariusze:
      1. Dodawanie uczestnika z email
      2. Dodawanie uczestnika bez email
      3. Edycja uczestnika
      4. Usuwanie uczestnika
      5. Walidacja unikalno≈õci email w grupie
      6. Dodanie minimum 3 uczestnik√≥w (przygotowanie do losowania)
    - User Stories: US-006
    - Szacowana liczba scenariuszy: 6

14. **E2E: Regu≈Çy Wyklucze≈Ñ**
    - Lokalizacja: `e2e/groups/exclusions.spec.ts`
    - Scenariusze:
      1. Dodawanie regu≈Çy wykluczenia
      2. Usuwanie regu≈Çy wykluczenia
      3. Walidacja niemo≈ºliwego losowania (wykluczenia tworzƒÖ deadlock)
    - User Stories: US-007
    - Szacowana liczba scenariuszy: 3

15. **E2E: Wy≈õwietlanie Wynik√≥w**
    - Lokalizacja: `e2e/results/view-results.spec.ts`
    - Scenariusze:
      1. Sprawdzanie wyniku jako zalogowany u≈ºytkownik
      2. Sprawdzanie wyniku jako niezalogowany u≈ºytkownik (via unique link)
      3. ≈öledzenie otwarƒá link√≥w
      4. Wy≈õwietlanie imienia wylosowanej osoby
      5. Wy≈õwietlanie listy ≈ºycze≈Ñ wylosowanej osoby
    - User Stories: US-012, US-013
    - Szacowana liczba scenariuszy: 5

16. **E2E: AI-generowanie Listu do Miko≈Çaja**
    - Lokalizacja: `e2e/wishlist/ai-generation.spec.ts`
    - Scenariusze:
      1. Pe≈Çny flow generowania (prompt ‚Üí generowanie ‚Üí podglƒÖd ‚Üí akceptacja)
      2. Odrzucenie wygenerowanego listu
      3. Regeneracja listu
      4. Limity generowania (3 dla niezalogowanych, 5 dla zalogowanych)
      5. Blokada przycisku po wykorzystaniu limit√≥w
      6. Edycja wygenerowanego listu po akceptacji
    - User Stories: US-014
    - Szacowana liczba scenariuszy: 6

17. **E2E: Edycja Listy ≈ªycze≈Ñ**
    - Lokalizacja: `e2e/wishlist/edit-wishlist.spec.ts`
    - Scenariusze:
      1. Dodawanie listy ≈ºycze≈Ñ
      2. Edycja listy ≈ºycze≈Ñ
      3. Auto-linkowanie URLs
      4. Blokada edycji po up≈Çyniƒôciu daty zako≈Ñczenia
    - User Stories: US-011
    - Szacowana liczba scenariuszy: 4

**Sukces Etapu 3:**
- 6 nowych plik√≥w test√≥w E2E
- Minimum 25 scenariuszy E2E
- Wszystkie kluczowe user flows z PRD sƒÖ przetestowane

---

### Etap 4: Podniesienie Prog√≥w Coverage (Priorytet ≈öREDNI)
**Szacowany czas:** 15 minut

**Zadania:**

18. **Zaktualizowaƒá `vitest.config.ts`**
    - Zmiana prog√≥w coverage z 1% do:
      ```typescript
      thresholds: {
        lines: 60,      // by≈Ço: 1
        functions: 60,  // by≈Ço: 1
        branches: 50,   // by≈Ço: 1
        statements: 60, // by≈Ço: 1
      }
      ```
    - Weryfikacja, ≈ºe testy przechodzƒÖ z nowymi progami
    - Commit zmian

**Sukces Etapu 4:**
- Progi coverage ustawione na 50-60%
- CI/CD bƒôdzie blokowaƒá merge bez odpowiedniego pokrycia
- Ochrona przed regresjƒÖ

---

### Etap 5: Testy API Endpoints (Priorytet ≈öREDNI)
**Szacowany czas:** 1 dzie≈Ñ

**Zadania:**

19. **Dodaƒá testy dla Auth endpoints**
    - Lokalizacja: `src/pages/api/auth/__tests__/`
    - Pliki:
      - `login.test.ts`
      - `register.test.ts`
      - `logout.test.ts`
      - `reset-password.test.ts`
    - Zakres:
      - Walidacja request body
      - Autoryzacja (Bearer token)
      - Response format
      - Error handling (400, 401, 500)
    - Szacowana liczba test√≥w: ~40-50

20. **Dodaƒá testy dla Groups endpoints**
    - Lokalizacja: `src/pages/api/groups/__tests__/`
    - Pliki:
      - `index.test.ts` (GET, POST)
      - `[groupId]/index.test.ts` (GET, PUT, DELETE)
      - `[groupId]/draw.test.ts` (POST)
      - `[groupId]/draw/validate.test.ts` (POST)
      - `[groupId]/participants.test.ts` (GET, POST)
      - `[groupId]/exclusions.test.ts` (GET, POST)
      - `[groupId]/result.test.ts` (GET)
    - Zakres:
      - Walidacja groupId (UUID format)
      - Autoryzacja (czy user jest tw√≥rcƒÖ grupy)
      - Walidacja request body
      - Error handling
      - Edge cases
    - Szacowana liczba test√≥w: ~70-80

21. **Dodaƒá testy dla Participants endpoints**
    - Lokalizacja: `src/pages/api/participants/__tests__/`
    - Pliki:
      - `[participantId].test.ts` (GET, PUT, DELETE)
      - `[participantId]/reveal.test.ts` (POST)
      - `[participantId]/wishlist/index.test.ts` (GET, PUT)
      - `[participantId]/wishlist/generate-ai.test.ts` (POST)
      - `[participantId]/wishlist/ai-status.test.ts` (GET)
    - Zakres:
      - Walidacja participantId
      - Autoryzacja (Bearer token lub participant access token)
      - AI rate limiting (3/5 generowa≈Ñ)
      - Error handling
    - Szacowana liczba test√≥w: ~50-60

22. **Dodaƒá testy dla Results i Exclusions endpoints**
    - Lokalizacja: `src/pages/api/results/__tests__/` i `src/pages/api/exclusions/__tests__/`
    - Pliki:
      - `results/[token]/index.test.ts`
      - `results/[token]/track.test.ts`
      - `exclusions/[id].test.ts`
    - Zakres:
      - Walidacja access token
      - ≈öledzenie otwarƒá link√≥w
      - Error handling
    - Szacowana liczba test√≥w: ~20-25

**Sukces Etapu 5:**
- Wszystkie 21 API endpoints majƒÖ testy
- Minimum 180 nowych test√≥w API
- Coverage og√≥lny wzrasta do ~65-70%

---

### Etap 6: Pozosta≈Çe Komponenty (Nice to have)
**Szacowany czas:** 1 dzie≈Ñ

**Zadania:**

23. **Dodaƒá testy dla modali**
    - `GroupEditModal.test.tsx`
    - `DeleteGroupModal.test.tsx`
    - `EditParticipantModal.test.tsx`
    - `DeleteParticipantModal.test.tsx`
    - `DrawConfirmationModal.test.tsx`
    - Szacowana liczba test√≥w: ~50-60

24. **Dodaƒá testy dla komponent√≥w wynik√≥w**
    - `ResultView.test.tsx`
    - `ResultHeader.test.tsx`
    - `AssignedPersonCard.test.tsx`
    - `WishlistSection.test.tsx`
    - `WishlistDisplay.test.tsx`
    - Szacowana liczba test√≥w: ~40-50

25. **Dodaƒá testy dla error components**
    - `ErrorWrapper.test.tsx`
    - `GenericError.test.tsx`
    - `NetworkError.test.tsx`
    - `UnauthorizedError.test.tsx`
    - Inne error components
    - Szacowana liczba test√≥w: ~30-40

**Sukces Etapu 6:**
- Wszystkie g≈Ç√≥wne komponenty majƒÖ testy
- Minimum 120 nowych test√≥w
- Coverage og√≥lny wzrasta do ~75-80%

---

## 8. Podsumowanie Planu

### Timeline
| Etap | Priorytet | Czas | Testy | Coverage po etapie |
|------|-----------|------|-------|-------------------|
| 1. Serwisy | KRYTYCZNY | 1 dzie≈Ñ | ~130 | 35-40% |
| 2. Komponenty | WYSOKI | 1 dzie≈Ñ | ~130 | 50-55% |
| 3. E2E | WYSOKI | 1 dzie≈Ñ | ~25 | 50-55% |
| 4. Progi | ≈öREDNI | 15 min | - | 50-55% |
| 5. API | ≈öREDNI | 1 dzie≈Ñ | ~180 | 65-70% |
| 6. Pozosta≈Çe | NISKI | 1 dzie≈Ñ | ~120 | 75-80% |
| **TOTAL** | - | **~5 dni** | **~585** | **75-80%** |

### Szacowana liczba nowych test√≥w: ~585
### Obecna liczba test√≥w: 592
### **TOTAL po zako≈Ñczeniu: ~1177 test√≥w**

### Coverage:
- **Przed:** 19.89%
- **Po Etapie 1-4:** ~50-55% (MVP READY)
- **Po Etapie 5-6:** ~75-80% (PRODUCTION READY)

### Priorytetyzacja dla MVP:
Je≈õli czas jest ograniczony, wykonaj **tylko Etapy 1-4** (3 dni pracy):
- ‚úÖ Wszystkie kluczowe serwisy przetestowane
- ‚úÖ Wszystkie kluczowe komponenty przetestowane
- ‚úÖ Wszystkie kluczowe user flows przetestowane E2E
- ‚úÖ Progi coverage ustawione na 50-60%
- ‚úÖ Coverage wzro≈õnie do ~50-55%

To wystarczy do uznania projektu za gotowy do MVP.

---

## 9. Rekomendacje Dodatkowe

### 9.1. Usprawnienia Infrastruktury Testowej

1. **Pre-commit hook sprawdzajƒÖcy coverage**
   - Dodaƒá do `lint-staged` w `package.json`:
     ```json
     "lint-staged": {
       "*.{ts,tsx}": [
         "eslint --fix",
         "vitest related --run --coverage"
       ]
     }
     ```

2. **Visual regression testing**
   - Rozwa≈ºyƒá dodanie Chromatic lub Percy dla test√≥w wizualnych
   - Szczeg√≥lnie wa≈ºne dla komponent√≥w UI (buttons, modals, cards)

3. **Snapshot tests**
   - Dodaƒá snapshot tests dla komponent√≥w UI
   - U≈ºywaƒá `toMatchInlineSnapshot()` dla czytelno≈õci

4. **CI/CD pipeline z raportami coverage**
   - Skonfigurowaƒá GitHub Actions do generowania raport√≥w coverage
   - Dodaƒá badge coverage do README
   - Blokowaƒá merge przy coverage < 60%

5. **Mutation testing**
   - Rozwa≈ºyƒá dodanie Stryker dla mutation testing
   - Weryfikacja jako≈õci test√≥w (czy testy faktycznie wykrywajƒÖ b≈Çƒôdy)

### 9.2. Dokumentacja Test√≥w

6. **Dodaƒá README dla test√≥w**
   - Lokalizacja: `src/__tests__/README.md`
   - Zawarto≈õƒá:
     - Jak uruchomiƒá testy
     - Jak pisaƒá nowe testy
     - Konwencje nazewnictwa
     - Przyk≈Çady mockowania Supabase

7. **Dodaƒá komentarze w testach**
   - Wyja≈õniƒá z≈Ço≈ºone scenariusze testowe
   - Dodaƒá linki do User Stories w PRD

### 9.3. Performance Testing

8. **Dodaƒá testy wydajno≈õci**
   - Testowanie czasu renderowania komponent√≥w
   - Testowanie czasu wykonania algorytmu losowania dla du≈ºych grup (100+ uczestnik√≥w)

---

## 10. Konkretne Pliki WymagajƒÖce Uwagi - Podsumowanie

### KRYTYCZNY Priorytet (Etap 1-2):
```
Serwisy:
‚îú‚îÄ‚îÄ src/lib/services/group.service.ts (21,819 B)
‚îú‚îÄ‚îÄ src/lib/services/participant.service.ts (26,400 B)
‚îú‚îÄ‚îÄ src/lib/services/results.service.ts (16,615 B)
‚îú‚îÄ‚îÄ src/lib/services/exclusion-rule.service.ts (16,084 B)
‚îî‚îÄ‚îÄ src/lib/services/assignments.service.ts (3,911 B)

Komponenty:
‚îú‚îÄ‚îÄ src/components/dashboard/Dashboard.tsx (185 L)
‚îú‚îÄ‚îÄ src/components/group/GroupView.tsx (215 L)
‚îú‚îÄ‚îÄ src/components/forms/CreateGroupForm.tsx (118 L)
‚îú‚îÄ‚îÄ src/components/group/DrawSection.tsx (144 L)
‚îú‚îÄ‚îÄ src/components/group/ParticipantsList.tsx (208 L)
‚îî‚îÄ‚îÄ src/components/group/AddExclusionForm.tsx (153 L)
```

### WYSOKI Priorytet (Etap 3):
```
E2E:
‚îú‚îÄ‚îÄ e2e/groups/full-draw-flow.spec.ts (NOWY)
‚îú‚îÄ‚îÄ e2e/groups/participants-management.spec.ts (NOWY)
‚îú‚îÄ‚îÄ e2e/groups/exclusions.spec.ts (NOWY)
‚îú‚îÄ‚îÄ e2e/results/view-results.spec.ts (NOWY)
‚îú‚îÄ‚îÄ e2e/wishlist/ai-generation.spec.ts (NOWY)
‚îî‚îÄ‚îÄ e2e/wishlist/edit-wishlist.spec.ts (NOWY)
```

### ≈öREDNI Priorytet (Etap 5):
```
API Endpoints (21 plik√≥w):
‚îú‚îÄ‚îÄ src/pages/api/auth/* (4 pliki)
‚îú‚îÄ‚îÄ src/pages/api/groups/* (7 plik√≥w)
‚îú‚îÄ‚îÄ src/pages/api/participants/* (6 plik√≥w)
‚îú‚îÄ‚îÄ src/pages/api/results/* (2 pliki)
‚îî‚îÄ‚îÄ src/pages/api/exclusions/* (1 plik)
```

### NISKI Priorytet (Etap 6):
```
Pozosta≈Çe komponenty:
‚îú‚îÄ‚îÄ Modals (5+ plik√≥w)
‚îú‚îÄ‚îÄ Result components (5+ plik√≥w)
‚îî‚îÄ‚îÄ Error components (8+ plik√≥w)
```

---

## 11. Kontakt / Nastƒôpne Kroki

### Pytania do rozstrzygniƒôcia:

1. **Czy chcesz wykonaƒá ca≈Çy plan (Etapy 1-6) czy tylko MVP (Etapy 1-4)?**
   - MVP = 3 dni, coverage ~50-55%
   - Full = 5 dni, coverage ~75-80%

2. **Czy chcesz zaczƒÖƒá od Etapu 1 (serwisy) czy Etapu 3 (E2E)?**
   - Zalecam: Etap 1 ‚Üí Etap 2 ‚Üí Etap 3 ‚Üí Etap 4
   - Alternatywa: Etap 3 (E2E najpierw) ‚Üí Etap 1 ‚Üí Etap 2 ‚Üí Etap 4

3. **Czy masz preferencje co do bibliotek testowych?**
   - Obecnie: Vitest + Playwright
   - Czy chcesz dodaƒá: Jest, Testing Library, Stryker?

4. **Czy chcesz, ≈ºebym przygotowa≈Ç przyk≈Çadowe testy jako template?**
   - Np. szablon dla test√≥w serwis√≥w
   - Szablon dla test√≥w komponent√≥w
   - Szablon dla test√≥w E2E

---

**Raport zako≈Ñczony.**
**Data:** 14 listopada 2025
**Wersja:** 1.0
